(function(){var e={60370:function(e,t,n){"use strict";var s=n(49963),o=n(66252);function r(e,t,n,s,r,a){const i=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(i)}var a={name:"App"},i=n(83744);const u=(0,i.Z)(a,[["render",r]]);var l=u,c=n(5121),d=n(22201),p=n(3577);const m={key:0},g={style:{"background-color":"rgb(231, 231, 231)",width:"50%",height:"600px",margin:"auto"}},h=(0,o._)("h1",null,"Feed of discussion",-1),f={style:{height:"550px",overflow:"scroll","background-color":"rgb(231, 231, 231)"}},v={class:"box"},b={class:"exp"},w=["onUpdate:modelValue"],y={class:"foo"},_={class:"mesbox"},S={id:"inputs",class:"fs"},O=(0,o._)("fieldset",{id:"actions",class:"fs"},[(0,o._)("input",{type:"submit",id:"submit",value:"Envoyer",class:"envmes"})],-1);function U(e,t,n,r,a,i){return i.posts&&i.posts.items?((0,o.wg)(),(0,o.iD)("div",m,[(0,o._)("button",{onClick:t[0]||(t[0]=(...e)=>i.handleSignOut&&i.handleSignOut(...e))},"disconnect"),(0,o._)("div",g,[h,(0,o._)("div",f,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.posts.items,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.timestamp_utc_iso8601},[(0,o._)("div",v,[(0,o._)("div",b,(0,p.zw)(e.user_id)+" :",1),(0,o.wy)((0,o._)("textarea",{class:"mes","onUpdate:modelValue":t=>e.message=t},null,8,w),[[s.nr,e.message]])])])))),128))]),(0,o._)("button",{onClick:t[1]||(t[1]=(...e)=>i.nextMessages&&i.nextMessages(...e))},"more messages")]),(0,o._)("div",y,[(0,o._)("div",_,[(0,o._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[(0,o._)("fieldset",S,[(0,o.wy)((0,o._)("textarea",{id:"message",type:"string",name:"Message",placeholder:"Enter your message","onUpdate:modelValue":t[2]||(t[2]=e=>a.message=e),required:""},null,512),[[s.nr,a.message]])]),O],32)])])])):(0,o.kq)("",!0)}n(70560);var x=n(33907);const P=(0,x.MT)({state:{posts:[],user:null},getters:{getUser:e=>e.user,posts:e=>e.posts,isAuthenticated:e=>!!e.user},mutations:{LOGOUT(e){e.user=null},SET_USER(e,t){e.user=t},SET_ITEMS(e,t){e.posts=t}},actions:{async loadPosts({commit:e},t){console.log(t);try{const n=await c.Z.get("http://localhost:8080/test_hellolambda/all-messages",{params:{cursor:t}});e("SET_ITEMS",n.data)}catch(n){alert("Failed to send request cause of :"+n),console.log(n)}},async LogOut({commit:e}){e("LOGOUT")},async addPost(e){console.log(e)},connectUser({commit:e},t){e("SET_USER",t)}}});var T=P,k=n(77167);const E={UserPoolId:"eu-west-1_3yzQez4uu",ClientId:"65ebu3b3qcvjci64if0n28l751"},j=new k.AM(E);var M=j;const C=n(98690);C.config.region="eu-west-1";const I=new C.CognitoIdentityCredentials({IdentityPoolId:"eu-west-1:bbi3cqg9ld"}),A=new C.Location({credentials:I}),L=new C.DynamoDB({credentials:I,region:A.config.region}),D="test_hellolambda/message";var q={name:"DiscussionBox",data(){return{user_id:"",message:""}},methods:{handleSignOut(){const e=M.getCurrentUser();console.log(e),e&&(e.signOut(),T.dispatch("logOut"),J.push("/login"))},nextMessages(){const e=this.posts.next_cursor;T.dispatch("loadPosts",e)},async handleSubmit(){const e={},t={TableName:D,Item:e};return await L.putItem(t).promise().then((()=>t.Item)).catch((e=>(console.log(e),e)))}},computed:{posts(){const e=T.getters.posts;return e},isAuthenticated(){return T.getters.isAuthenticated}},async created(){await T.dispatch("loadPosts")}};const Z=(0,i.Z)(q,[["render",U]]);var F=Z;const V={id:"login-content"},z=(0,o._)("h1",{style:{}},"Welcome to our discussion App",-1),R={id:"inputsl"},B=(0,o._)("fieldset",{id:"actionsl"},[(0,o._)("input",{type:"submit",id:"submit",value:"Log in",class:"ipt"})],-1),G=(0,o._)("div",null,null,-1);function H(e,t,n,r,a,i){return(0,o.wg)(),(0,o.iD)("div",V,[z,(0,o._)("form",{class:"form",onSubmit:t[2]||(t[2]=(0,s.iM)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[(0,o._)("fieldset",R,[(0,o.wy)((0,o._)("input",{id:"username",type:"username",name:"Username",placeholder:"Enter you username",class:"ipt","onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e),required:""},null,512),[[s.nr,a.username]]),(0,o.wy)((0,o._)("input",{id:"password",type:"password",name:"Password",placeholder:"Password",class:"ipt","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),required:""},null,512),[[s.nr,a.password]])]),B,G],32)])}var K={name:"LoginPage",data(){return{username:"",password:""}},computed:{isAuthenticated(){return T.getters.isAuthenticated},posts(){return T.getters.posts},getUser:e=>e.user},methods:{handleSubmit(){var e={Username:this.username,Password:this.password};const t=new k.sD(e),n={Username:this.username,Pool:M},s=new k.ws(n);s.authenticateUser(t,{onSuccess(e){T.dispatch("connectUser",M.getCurrentUser()),J.push("/home"),console.log(s)},onFailure(e){console.log("onFailure:",e)}})}}};const N=(0,i.Z)(K,[["render",H]]);var Q=N;const W=[{path:"/home",name:"Home",component:F},{path:"/login",name:"Login",component:Q}],Y=(0,d.p7)({history:(0,d.PO)(),routes:W});Y.beforeEach(((e,t,n)=>{const s=T.getters.isAuthenticated;"Login"===e.name||s?n():n("/login")}));var J=Y;c.Z.defaults.withCredentials=!0,c.Z.defaults.baseURL="https://gabbyblog.herokuapp.com/";const X=(0,s.ri)(l);X.use(J),X.use(T),X.mount("#app")},56249:function(){},28022:function(){}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,function(){var e=[];n.O=function(t,s,o,r){if(!s){var a=1/0;for(c=0;c<e.length;c++){s=e[c][0],o=e[c][1],r=e[c][2];for(var i=!0,u=0;u<s.length;u++)(!1&r||a>=r)&&Object.keys(n.O).every((function(e){return n.O[e](s[u])}))?s.splice(u--,1):(i=!1,r<a&&(a=r));if(i){e.splice(c--,1);var l=o();void 0!==l&&(t=l)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[s,o,r]}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,r,a=s[0],i=s[1],u=s[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(u)var c=u(n)}for(t&&t(s);l<a.length;l++)r=a[l],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},s=self["webpackChunkhavoc_project"]=self["webpackChunkhavoc_project"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(60370)}));s=n.O(s)})();
//# sourceMappingURL=app.349720fa.js.map